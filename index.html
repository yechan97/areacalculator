<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ν† λ¦¬λ§¤νΈ λ©΄μ  κ³„μ‚°κΈ°</title>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Gowun Dodum', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #E0F7D4;
            margin: 0;
        }
        .container {
            width: 90%;
            max-width: 800px;
            margin: auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 10px;
            box-sizing: border-box;
            text-align: center;
        }
        h1 {
            color: #81C784;
            margin-bottom: 20px;
            font-size: 2em;
        }
        .upload-box {
            border: 2px dashed #ccc;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }
        .upload-box input[type="file"] {
            display: none;
        }
        .upload-box label {
            font-size: 1.2em;
            cursor: pointer;
            color: #007BFF;
        }
        .upload-box p {
            margin: 10px 0;
            color: #555;
        }
        #imageContainer {
            border: 1px solid #ccc;
            width: 100%;
            height: auto;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }
        #imageContainer img {
            width: 100%;
            height: auto;
        }
        .area {
            border: 2px solid red;
            background-color: rgba(255, 0, 0, 0.3);
            position: absolute;
        }
        .btn {
            padding: 15px 30px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            color: #fff;
            margin: 5px;
        }
        .btn-upload {
            background-color: #007BFF;
        }
        .btn-reset {
            background-color: #DC3545;
        }
        .btn-calculate {
            background-color: #28A745;
        }
        .btn-undo {
            background-color: #FFC107;
        }
        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: grey;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ν† λ¦¬λ§¤νΈ λ©΄μ  κ³„μ‚°κΈ°</h1>
        <div class="upload-box">
            <input type="file" id="file-input">
            <label for="file-input">νμΌ μ„ νƒ</label>
            <p id="file-name">μ„ νƒλ νμΌ μ—†μ</p>
        </div>
        <div id="imageContainer"></div>
        <button class="btn btn-undo" onclick="undoArea()">λλλ¦¬κΈ°</button>
        <button class="btn btn-reset" onclick="resetAll()">μ΄κΈ°ν™”</button>
        <button class="btn btn-calculate" onclick="calculateAreas()">κ³„μ‚°ν•κΈ°</button>
        <div id="areasInfo"></div>
        <div id="torimatResult"></div>
        <div class="footer">
            <p>by_μμ°¬</p>
        </div>
    </div>
    <script>
        let imageContainer = document.getElementById('imageContainer');
        let fileInput = document.getElementById('file-input');
        let fileName = document.getElementById('file-name');
        let areasInfo = document.getElementById('areasInfo');
        let torimatResult = document.getElementById('torimatResult');
        let startX, startY, endX, endY;
        let areas = [];
        let scale = 1;

        fileInput.addEventListener('change', (event) => {
            let file = event.target.files[0];
            fileName.textContent = file.name;
            let reader = new FileReader();
            reader.onload = (e) => {
                let img = new Image();
                img.src = e.target.result;
                img.onload = () => {
                    imageContainer.innerHTML = '';
                    imageContainer.appendChild(img);
                    img.addEventListener('mousedown', startDrawing);
                    img.addEventListener('mousemove', draw);
                    img.addEventListener('mouseup', endDrawing);
                    img.addEventListener('mouseleave', endDrawing);
                    scale = img.naturalWidth / img.width;
                };
            };
            reader.readAsDataURL(file);
        });

        function startDrawing(event) {
            startX = event.offsetX;
            startY = event.offsetY;
            endX = startX;
            endY = startY;
            imageContainer.style.cursor = 'crosshair';
        }

        function draw(event) {
            if (startX !== undefined && startY !== undefined) {
                endX = event.offsetX;
                endY = event.offsetY;
                let width = endX - startX;
                let height = endY - startY;
                let areaDiv = document.createElement('div');
                areaDiv.className = 'area';
                areaDiv.style.left = startX + 'px';
                areaDiv.style.top = startY + 'px';
                areaDiv.style.width = width + 'px';
                areaDiv.style.height = height + 'px';
                imageContainer.innerHTML = '';
                imageContainer.appendChild(event.target);
                imageContainer.appendChild(areaDiv);
            }
        }

        function endDrawing(event) {
            if (startX !== undefined && startY !== undefined) {
                endX = event.offsetX;
                endY = event.offsetY;
                let width = Math.abs(endX - startX);
                let height = Math.abs(endY - startY);
                let left = Math.min(startX, endX);
                let top = Math.min(startY, endY);
                let areaDiv = document.createElement('div');
                areaDiv.className = 'area';
                areaDiv.style.left = left + 'px';
                areaDiv.style.top = top + 'px';
                areaDiv.style.width = width + 'px';
                areaDiv.style.height = height + 'px';
                imageContainer.appendChild(areaDiv);

                let area = {
                    left: left * scale,
                    top: top * scale,
                    width: width * scale,
                    height: height * scale
                };
                areas.push(area);
                updateAreasInfo();

                startX = undefined;
                startY = undefined;
                imageContainer.style.cursor = 'default';
            }
        }

        function updateAreasInfo() {
            areasInfo.innerHTML = '';
            let totalArea = 0;
            areas.forEach((area, index) => {
                let areaSize = (area.width / 100) * (area.height / 100);
                totalArea += areaSize;
                areasInfo.innerHTML += `μμ—­ ${index + 1}: κ°€λ΅ ${Math.round(area.width)}cm, μ„Έλ΅ ${Math.round(area.height)}cm, λ©΄μ  ${areaSize.toFixed(2)}mΒ²<br>`;
            });
            areasInfo.innerHTML += `μ΄ λ©΄μ : ${totalArea.toFixed(2)}mΒ²`;
        }

        function undoArea() {
            areas.pop();
            updateAreasInfo();
            redrawAreas();
        }

        function resetAll() {
            areas = [];
            updateAreasInfo();
            imageContainer.innerHTML = '';
            fileName.textContent = 'μ„ νƒλ νμΌ μ—†μ';
        }

        function redrawAreas() {
            let img = imageContainer.querySelector('img');
            imageContainer.innerHTML = '';
            if (img) {
                imageContainer.appendChild(img);
                areas.forEach(area => {
                    let areaDiv = document.createElement('div');
                    areaDiv.className = 'area';
                    areaDiv.style.left = area.left / scale + 'px';
                    areaDiv.style.top = area.top / scale + 'px';
                    areaDiv.style.width = area.width / scale + 'px';
                    areaDiv.style.height = area.height / scale + 'px';
                    imageContainer.appendChild(areaDiv);
                });
            }
        }

        function calculateAreas() {
            let totalArea = 0;
            areas.forEach(area => {
                totalArea += (area.width / 100) * (area.height / 100);
            });

            let mats50x50 = totalArea * 4;
            let matCounts = {
                '80x80': Math.floor(mats50x50 / 2.56),
                '100x100': Math.floor(mats50x50 / 2.56 * 2.56 / 3.8),
                '120x80': Math.floor(mats50x50 / 2.56 * 2.56 / 3.8)
            };

let prices = {
    'μμ΄μ–ΈνΈλ§¤νΈ': matCounts['80x80'] * 44000,
    'μμ΄μ–ΈνΈν”λ¬μ¤λ§¤νΈ': matCounts['80x80'] * 47000,
    'λΉ…ν† λ¦¬λ§¤νΈ': matCounts['100x100'] * 79000,
    'μμ΄μ–ΈνΈμ™€μ΄λ“λ§¤νΈ': matCounts['120x80'] * 75000
};

let resultHtml = `
    <table>
        <tr>
            <th>ν•„μ”ν• λ§¤νΈ μ</th>
            <th>κ°€κ²©</th>
        </tr>
        <tr>
            <td>
                80x80: ${matCounts['80x80']}μ¥<br>
                100x100: ${matCounts['100x100']}μ¥<br>
                120x80: ${matCounts['120x80']}μ¥
            </td>
            <td>
                μμ΄μ–ΈνΈλ§¤νΈ: ${prices['μμ΄μ–ΈνΈλ§¤νΈ'].toLocaleString()}μ›<br>
                μμ΄μ–ΈνΈν”λ¬μ¤λ§¤νΈ: ${prices['μμ΄μ–ΈνΈν”λ¬μ¤λ§¤νΈ'].toLocaleString()}μ›<br>
                λΉ…ν† λ¦¬λ§¤νΈ: ${prices['λΉ…ν† λ¦¬λ§¤νΈ'].toLocaleString()}μ›<br>
                μμ΄μ–ΈνΈμ™€μ΄λ“λ§¤νΈ: ${prices['μμ΄μ–ΈνΈμ™€μ΄λ“λ§¤νΈ'].toLocaleString()}μ›
            </td>
        </tr>
    </table>
    <button class="copy-button" onclick="copyResult()">κ²°κ³Ό λ³µμ‚¬ν•κΈ°</button>
    <h2>μμƒ κ²¬μ  μ•λ‚΄</h2>
    <div class="region-buttons">
        <button class="region-button" onclick="copyRegion('μλ„κ¶')"><b>μλ„κ¶</b></button>
        <button class="region-button" onclick="copyRegion('μ¶©μ²­')"><b>μ¶©μ²­</b></button>
        <button class="region-button" onclick="copyRegion('μ§€λ°©')"><b>μ§€λ°©</b></button>
    </div>
`;

torimatResult.innerHTML = resultHtml;
}

function copyResult() {
    const resultText = document.querySelector('#torimatResult').innerText;
    const textArea = document.createElement('textarea');
    textArea.value = resultText;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    alert('κ²°κ³Όκ°€ ν΄λ¦½λ³΄λ“μ— λ³µμ‚¬λμ—μµλ‹λ‹¤.');
}

function copyRegion(region) {
    let regionText = {
        'μλ„κ¶': `
π‰ μμƒ κ²¬μ μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤

π’μμ΄μ–ΈνΈλ§¤νΈπ’_80x80(44,000μ›)
π’μμ΄μ–ΈνΈν”λ¬μ¤λ§¤νΈπ’_80x80+λ…Όμ¬λ¦½κΈ°λ¥(47,000μ›)
μ•½ ${matCounts['μμ΄μ–ΈνΈλ§¤νΈ']} μμƒλ©λ‹λ‹¤.

π’μμ΄μ–ΈνΈμ™€μ΄λ“λ§¤νΈπ’_120x80λ§¤νΈ λ…Όμ¬λ¦½κΈ°λ¥(75,000μ›)
π’λΉ…ν† λ¦¬λ§¤νΈπ’_1λ―Έν„°x1λ―Έν„°+ λ…Όμ¬λ¦½κΈ°λ¥(79,000μ› μ‹ μ ν’ μ¶μ‹ ν•μ •κ°€)
μ•½ ${matCounts['λΉ…ν† λ¦¬λ§¤νΈ']} μμƒλ©λ‹λ‹¤.

β… μ‹¤μ  μ‹κ³µ ν›„ μ‚¬μ©λ λ§¤νΈλ§νΌλ§ κ²°μ ν•΄ μ£Όμ‹λ©΄ λ©λ‹λ‹¤.
β… κ²¬μ κ³Ό μ‹¤μ  μ‹κ³µ μ¥μμ— μ¤μ°¨κ°€ μμ„ μ μμµλ‹λ‹¤.
β… λ³Έμ‚¬ μ§μ ‘ μ‹κ³µ & μ „λ¬Έκ°€ μ‹κ³µ λ°©μΉ¨μ„ μ¤€μν•©λ‹λ‹¤.
β… 80λ§¤νΈ κΈ°μ¤€ 50μ¥ λ―Έλ§ μ‹κ³µλΉ„κ°€ 10λ§μ› λ°μƒλ©λ‹λ‹¤.
β… 100/120λ§¤νΈ κΈ°μ¤€ 40μ¥ λ―Έλ§ μ‹κ³µλΉ„κ°€ 10λ§μ› λ°μƒλ©λ‹λ‹¤.
        `.trim(),
        'μ¶©μ²­': `
π‰ μμƒ κ²¬μ μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤

π’μμ΄μ–ΈνΈλ§¤νΈπ’_80x80(44,000μ›)
π’μμ΄μ–ΈνΈν”λ¬μ¤λ§¤νΈπ’_80x80+λ…Όμ¬λ¦½κΈ°λ¥(47,000μ›)
μ•½ ${matCounts['μμ΄μ–ΈνΈλ§¤νΈ']} μμƒλ©λ‹λ‹¤.

π’μμ΄μ–ΈνΈμ™€μ΄λ“λ§¤νΈπ’_120x80λ§¤νΈ λ…Όμ¬λ¦½κΈ°λ¥(75,000μ›)
π’λΉ…ν† λ¦¬λ§¤νΈπ’_1λ―Έν„°x1λ―Έν„°+ λ…Όμ¬λ¦½κΈ°λ¥(79,000μ› μ‹ μ ν’ μ¶μ‹ ν•μ •κ°€)
μ•½ ${matCounts['λΉ…ν† λ¦¬λ§¤νΈ']} μμƒλ©λ‹λ‹¤.

β… μ‹¤μ  μ‹κ³µ ν›„ μ‚¬μ©λ λ§¤νΈλ§νΌλ§ κ²°μ ν•΄ μ£Όμ‹λ©΄ λ©λ‹λ‹¤.
β… κ²¬μ κ³Ό μ‹¤μ  μ‹κ³µ μ¥μμ— μ¤μ°¨κ°€ μμ„ μ μμµλ‹λ‹¤.
β… λ³Έμ‚¬ μ§μ ‘ μ‹κ³µ & μ „λ¬Έκ°€ μ‹κ³µ λ°©μΉ¨μ— λ”°λΌ μ‹κ³µλΉ„κ°€ 10λ§ μ› λ¶€κ³Όλ©λ‹λ‹¤.
        `.trim(),
        'μ§€λ°©': `
π‰ μμƒ κ²¬μ μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤

π’μμ΄μ–ΈνΈλ§¤νΈπ’_80x80(44,000μ›)
π’μμ΄μ–ΈνΈν”λ¬μ¤λ§¤νΈπ’_80x80+λ…Όμ¬λ¦½κΈ°λ¥(47,000μ›)
μ•½ ${matCounts['μμ΄μ–ΈνΈλ§¤νΈ']} μμƒλ©λ‹λ‹¤.

π’μμ΄μ–ΈνΈμ™€μ΄λ“λ§¤νΈπ’_120x80λ§¤νΈ λ…Όμ¬λ¦½κΈ°λ¥(75,000μ›)
π’λΉ…ν† λ¦¬λ§¤νΈπ’_1λ―Έν„°x1λ―Έν„°+ λ…Όμ¬λ¦½κΈ°λ¥(79,000μ› μ‹ μ ν’ μ¶μ‹ ν•μ •κ°€)
μ•½ ${matCounts['λΉ…ν† λ¦¬λ§¤νΈ']} μμƒλ©λ‹λ‹¤.

β… μ‹¤μ  μ‹κ³µ ν›„ μ‚¬μ©λ λ§¤νΈλ§νΌλ§ κ²°μ ν•΄ μ£Όμ‹λ©΄ λ©λ‹λ‹¤.
β… κ²¬μ κ³Ό μ‹¤μ  μ‹κ³µ μ¥μμ— μ¤μ°¨κ°€ μμ„ μ μμµλ‹λ‹¤.
β… λ³Έμ‚¬ μ§μ ‘ μ‹κ³µ & μ „λ¬Έκ°€ μ‹κ³µ λ°©μΉ¨μ— λ”°λΌ μ‹κ³µλΉ„, μ¶μ¥λΉ„ κ° 10λ§ μ› λ¶€κ³Όλ©λ‹λ‹¤.
        `.trim()
    };

    const textArea = document.createElement('textarea');
    textArea.value = regionText[region];
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    alert('κ²°κ³Όκ°€ ν΄λ¦½λ³΄λ“μ— λ³µμ‚¬λμ—μµλ‹λ‹¤.');
}
    </script>
</body>
</html>
